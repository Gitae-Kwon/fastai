<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AI 요약기</title>
  <style>
    body{font-family:sans-serif;max-width:680px;margin:40px auto}
    textarea{width:100%;height:160px}
    button{margin-top:10px;padding:8px 18px;font-size:16px}
    pre{background:#f5f5f5;padding:12px;border-radius:6px;white-space:pre-wrap}
  </style>
</head>
<body>
  <h1>✂️ AI 요약기</h1>

  <textarea id="input" placeholder="요약할 내용을 붙여 넣으세요"></textarea>
  <button id="run">요약하기</button>

  <h2>요약 결과</h2>
  <pre id="result">— 아직 없음 —</pre>

  <script>
    const runBtn = document.getElementById("run");
    const input  = document.getElementById("input");
    const result = document.getElementById("result");

    runBtn.onclick = async () => {
      const text = input.value.trim();
      if (!text) { alert("내용을 입력하세요"); return; }

      result.textContent = "⏳ 요약 중…";

      try {
        const res = await fetch("/summarize", {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded" },
          body: new URLSearchParams({ text })
        });
        if (!res.ok) throw new Error(await res.text());
        const data = await res.json();
        result.textContent = data.summary;
      } catch (err) {
        console.error(err);
        result.textContent = "❌ 에러: " + err.message;
      }
    };
  </script>
</body>
</html>
